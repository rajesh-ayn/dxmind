import { __decorate } from "tslib";
import { AfterViewInit, Directive, ElementRef, Input, OnDestroy } from '@angular/core';
import { MalihuScrollbarService } from './malihu-scrollbar.service';
/**
 * Malihu Custom Scrollbar directive
 * Use this reference link for options definition
 * http://manos.malihu.gr/jquery-custom-content-scroller/
 */
var MalihuScrollbarDirective = /** @class */ (function () {
    function MalihuScrollbarDirective(elementRef, mScrollbarService) {
        this.elementRef = elementRef;
        this.mScrollbarService = mScrollbarService;
    }
    MalihuScrollbarDirective.prototype.ngAfterViewInit = function () {
        this.initElements();
        this.initScrollbar();
    };
    MalihuScrollbarDirective.prototype.ngOnDestroy = function () {
        this.destroyScrollbar();
    };
    MalihuScrollbarDirective.prototype.initElements = function () {
        this.scrollableElement = !!this.scrollElementId
            ? $("#" + this.scrollElementId)
            : $(this.elementRef.nativeElement);
        if (!!this.scrollElementId && this.scrollableElement.length === 0) {
            console.error("MalihuScrollbarDirective cannot find element with provided scrollElementId: " + this.scrollElementId + ".");
        }
    };
    MalihuScrollbarDirective.prototype.initScrollbar = function () {
        this.mScrollbarService.initScrollbar(this.scrollableElement, this.scrollbarOptions);
    };
    MalihuScrollbarDirective.prototype.destroyScrollbar = function () {
        try {
            this.mScrollbarService.destroy(this.scrollableElement);
        }
        catch (error) {
            // workaround for malihu-custom-scrollbar-plugin issue:
            // Cannot read property 'autoUpdate' of undefined
            // https://github.com/malihu/malihu-custom-scrollbar-plugin/issues/392
        }
    };
    MalihuScrollbarDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: MalihuScrollbarService }
    ]; };
    __decorate([
        Input()
    ], MalihuScrollbarDirective.prototype, "scrollElementId", void 0);
    __decorate([
        Input()
    ], MalihuScrollbarDirective.prototype, "scrollbarOptions", void 0);
    MalihuScrollbarDirective = __decorate([
        Directive({
            selector: '[MalihuScrollbar], [malihu-scrollbar]',
        })
    ], MalihuScrollbarDirective);
    return MalihuScrollbarDirective;
}());
export { MalihuScrollbarDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFsaWh1LXNjcm9sbGJhci5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtbWFsaWh1LXNjcm9sbGJhci8iLCJzb3VyY2VzIjpbInNyYy9tYWxpaHUtc2Nyb2xsYmFyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFcEU7Ozs7R0FJRztBQUlIO0lBTUUsa0NBQ1UsVUFBc0IsRUFDdEIsaUJBQXlDO1FBRHpDLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUF3QjtJQUMvQyxDQUFDO0lBRUwsa0RBQWUsR0FBZjtRQUNFLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELDhDQUFXLEdBQVg7UUFDRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsK0NBQVksR0FBWjtRQUNFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWU7WUFDN0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFJLElBQUksQ0FBQyxlQUFpQixDQUFDO1lBQy9CLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUVyQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ2pFLE9BQU8sQ0FBQyxLQUFLLENBQUMsaUZBQStFLElBQUksQ0FBQyxlQUFlLE1BQUcsQ0FBQyxDQUFDO1NBQ3ZIO0lBQ0gsQ0FBQztJQUVELGdEQUFhLEdBQWI7UUFDRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN0RixDQUFDO0lBRUQsbURBQWdCLEdBQWhCO1FBQ0UsSUFBSTtZQUNGLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDeEQ7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLHVEQUF1RDtZQUN2RCxpREFBaUQ7WUFDakQsc0VBQXNFO1NBQ3ZFO0lBQ0gsQ0FBQzs7Z0JBbkNxQixVQUFVO2dCQUNILHNCQUFzQjs7SUFQMUM7UUFBUixLQUFLLEVBQUU7cUVBQXlCO0lBQ3hCO1FBQVIsS0FBSyxFQUFFO3NFQUEyRDtJQUZ4RCx3QkFBd0I7UUFIcEMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLHVDQUF1QztTQUNsRCxDQUFDO09BQ1csd0JBQXdCLENBMkNwQztJQUFELCtCQUFDO0NBQUEsQUEzQ0QsSUEyQ0M7U0EzQ1ksd0JBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBJbnB1dCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1hbGlodVNjcm9sbGJhclNlcnZpY2UgfSBmcm9tICcuL21hbGlodS1zY3JvbGxiYXIuc2VydmljZSc7XHJcblxyXG4vKipcclxuICogTWFsaWh1IEN1c3RvbSBTY3JvbGxiYXIgZGlyZWN0aXZlXHJcbiAqIFVzZSB0aGlzIHJlZmVyZW5jZSBsaW5rIGZvciBvcHRpb25zIGRlZmluaXRpb25cclxuICogaHR0cDovL21hbm9zLm1hbGlodS5nci9qcXVlcnktY3VzdG9tLWNvbnRlbnQtc2Nyb2xsZXIvXHJcbiAqL1xyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tNYWxpaHVTY3JvbGxiYXJdLCBbbWFsaWh1LXNjcm9sbGJhcl0nLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgTWFsaWh1U2Nyb2xsYmFyRGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICBASW5wdXQoKSBzY3JvbGxFbGVtZW50SWQ6IHN0cmluZztcclxuICBASW5wdXQoKSBzY3JvbGxiYXJPcHRpb25zOiBNQ3VzdG9tU2Nyb2xsYmFyLkN1c3RvbVNjcm9sbGJhck9wdGlvbnM7XHJcblxyXG4gIHNjcm9sbGFibGVFbGVtZW50OiBKUXVlcnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgcHJpdmF0ZSBtU2Nyb2xsYmFyU2VydmljZTogTWFsaWh1U2Nyb2xsYmFyU2VydmljZSxcclxuICApIHsgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICB0aGlzLmluaXRFbGVtZW50cygpO1xyXG4gICAgdGhpcy5pbml0U2Nyb2xsYmFyKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuZGVzdHJveVNjcm9sbGJhcigpO1xyXG4gIH1cclxuXHJcbiAgaW5pdEVsZW1lbnRzKCkge1xyXG4gICAgdGhpcy5zY3JvbGxhYmxlRWxlbWVudCA9ICEhdGhpcy5zY3JvbGxFbGVtZW50SWRcclxuICAgICAgPyAkKGAjJHt0aGlzLnNjcm9sbEVsZW1lbnRJZH1gKVxyXG4gICAgICA6ICQodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgIGlmICghIXRoaXMuc2Nyb2xsRWxlbWVudElkICYmIHRoaXMuc2Nyb2xsYWJsZUVsZW1lbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE1hbGlodVNjcm9sbGJhckRpcmVjdGl2ZSBjYW5ub3QgZmluZCBlbGVtZW50IHdpdGggcHJvdmlkZWQgc2Nyb2xsRWxlbWVudElkOiAke3RoaXMuc2Nyb2xsRWxlbWVudElkfS5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGluaXRTY3JvbGxiYXIoKSB7XHJcbiAgICB0aGlzLm1TY3JvbGxiYXJTZXJ2aWNlLmluaXRTY3JvbGxiYXIodGhpcy5zY3JvbGxhYmxlRWxlbWVudCwgdGhpcy5zY3JvbGxiYXJPcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3lTY3JvbGxiYXIoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLm1TY3JvbGxiYXJTZXJ2aWNlLmRlc3Ryb3kodGhpcy5zY3JvbGxhYmxlRWxlbWVudCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyB3b3JrYXJvdW5kIGZvciBtYWxpaHUtY3VzdG9tLXNjcm9sbGJhci1wbHVnaW4gaXNzdWU6XHJcbiAgICAgIC8vIENhbm5vdCByZWFkIHByb3BlcnR5ICdhdXRvVXBkYXRlJyBvZiB1bmRlZmluZWRcclxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hbGlodS9tYWxpaHUtY3VzdG9tLXNjcm9sbGJhci1wbHVnaW4vaXNzdWVzLzM5MlxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=